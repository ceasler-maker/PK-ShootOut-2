<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats 207 Penalty Shootout Review Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f4f4f9;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        #game-container {
            margin-top: 30px;
        }
        .button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 18px;
            cursor: pointer;
        }
        #question {
            font-size: 20px;
            margin: 20px 0;
        }
        #scoreboard {
            margin-top: 20px;
        }
        #winner {
            font-size: 24px;
            color: green;
            font-weight: bold;
        }
        #field {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 20px auto;
            background: #7cfc00; /* green field */
            border: 2px solid #333;
            border-radius: 10px;
        }
        #goal {
            position: absolute;
            top: 20px;
            left: 50%;
            width: 180px;
            height: 80px;
            margin-left: -90px;
            border: 3px solid #fff;
            background: #87cefa; /* light blue goal area */
        }
        #keeper {
            position: absolute;
            top: 20px;
            left: 50%;
            width: 40px;
            height: 40px;
            margin-left: -20px;
            background: red;
            border-radius: 50%;
            transition: all 0.5s;
        }
        #ball {
            position: absolute;
            bottom: 10px;
            left: 50%;
            width: 20px;
            height: 20px;
            margin-left: -10px;
            background: white;
            border-radius: 50%;
            transition: all 0.8s;
        }
    </style>
</head>
<body>
    <h1>Stats 207 Penalty Shootout Review Game</h1>
    <div id="game-container">
        <div id="player-turn">Player 1's Turn</div>
        <div id="question"></div>
        <button class="button" onclick="answer(true)">True</button>
        <button class="button" onclick="answer(false)">False</button>
        <div id="result"></div>
        <div id="scoreboard">
            Player 1 Score: <span id="score1">0</span> | 
            Player 2 Score: <span id="score2">0</span>
        </div>
        <div id="winner"></div>
    </div>

    <div id="field">
        <div id="goal"></div>
        <div id="keeper"></div>
        <div id="ball"></div>
    </div>

    <script>
        const questions = [
            {q: "Box plots show outliers, the IQR, and the Median.", a: true},
            {q: "Outliers can affect linear relationships.", a: true},
            {q: "Outliers cannot make a positive relationship negative.", a: false},
            {q: "Height can often be considered both a qualitative and quantitative variable.", a: false},
            {q: "A pie chart is the best way for displaying qualitative data.", a: false},
            {q: "Histograms are meant for displaying qualitative data.", a: false},
            {q: "A right skewed graph would have its peak near the right side.", a: false},
            {q: "58% of data is shown in the first standard deviation of a normal distribution.", a: false},
            {q: "The 78th percentile means that 78% of the data is below that point.", a: true},
            {q: "The mean is heavily affected by outliers.", a: true},
            {q: "The median is the 50th percentile.", a: true},
            {q: "The range and the IQR can be equal.", a: true},
            {q: "Bimodality means a data set having 2 peaks.", a: true},
            {q: "Correlation means causation.", a: false},
            {q: "Z scores are in the same unit as the data.", a: false},
            {q: "The Z-Score formula is (Mean-Observed value)/(Standard Deviation).", a: true},
            {q: "IQR and Standard deviation would be affected by a shift.", a: false},
            {q: "A R-Score of 0 shows only no linear relationship and not relationships in general.", a: true},
            {q: "P-Value relates to Probability.", a: true},
            {q: "It is valid to remove outliers before taking correlation.", a: true}
        ];

        let score1 = 0;
        let score2 = 0;
        let playerTurn = 1;
        let round = 1;
        const maxRounds = 5;
        let usedQuestions = [];

        const ball = document.getElementById("ball");
        const keeper = document.getElementById("keeper");

        function getRandomQuestion() {
            if (usedQuestions.length === questions.length) usedQuestions = [];
            let index;
            do {
                index = Math.floor(Math.random() * questions.length);
            } while (usedQuestions.includes(index));
            usedQuestions.push(index);
            return questions[index];
        }

        let currentQuestion = getRandomQuestion();
        document.getElementById("question").innerText = currentQuestion.q;

        function animateShot(correct) {
            // reset positions
            ball.style.bottom = "10px";
            ball.style.left = "50%";
            keeper.style.left = "50%";
            // choose shot direction
            const directions = ["-40px", "0px", "40px"];
            const ballMove = directions[Math.floor(Math.random() * directions.length)];
            const keeperMove = correct ? directions[Math.floor(Math.random() * directions.length)] : ballMove; // if incorrect, keeper blocks ball

            setTimeout(() => {
                ball.style.bottom = "130px";
                ball.style.left = `calc(50% + ${ballMove})`;
                keeper.style.left = `calc(50% + ${keeperMove})`;
            }, 100);
        }

        function answer(playerAnswer) {
            const resultDiv = document.getElementById("result");
            const correct = playerAnswer === currentQuestion.a;

            animateShot(correct);

            setTimeout(() => {
                if (correct) {
                    resultDiv.innerText = "Correct! Goal!";
                    if (playerTurn === 1) score1++; 
                    else score2++;
                } else {
                    resultDiv.innerText = "Incorrect! Saved by the keeper!";
                }

                document.getElementById("score1").innerText = score1;
                document.getElementById("score2").innerText = score2;

                // Check if game over
                if (round >= maxRounds && playerTurn === 2) {
                    checkWinner();
                } else {
                    playerTurn = playerTurn === 1 ? 2 : 1;
                    if (playerTurn === 1) round++;
                    document.getElementById("player-turn").innerText = `Player ${playerTurn}'s Turn`;
                    currentQuestion = getRandomQuestion();
                    document.getElementById("question").innerText = currentQuestion.q;
                }
            }, 1000); // wait for animation
        }

        function checkWinner() {
            const winnerDiv = document.getElementById("winner");
            if (score1 > score2) winnerDiv.innerText = "Player 1 Wins!";
            else if (score2 > score1) winnerDiv.innerText = "Player 2 Wins!";
            else {
                winnerDiv.innerText = "Tie! Sudden Death Begins!";
                suddenDeath();
            }
        }

        function suddenDeath() {
            round = 1;
            const buttonTrue = document.querySelector("button[onclick='answer(true)']");
            const buttonFalse = document.querySelector("button[onclick='answer(false)']");
            buttonTrue.onclick = () => suddenDeathAnswer(true);
            buttonFalse.onclick = () => suddenDeathAnswer(false);
        }

        function suddenDeathAnswer(playerAnswer) {
            const resultDiv = document.getElementById("result");
            const correct = playerAnswer === currentQuestion.a;

            animateShot(correct);

            setTimeout(() => {
                if (correct) {
                    resultDiv.innerText = "Correct! Goal!";
                    playerTurn = playerTurn === 1 ? 2 : 1;
                    document.getElementById("player-turn").innerText = `Player ${playerTurn}'s Turn`;
                    currentQuestion = getRandomQuestion();
                    document.getElementById("question").innerText = currentQuestion.q;
                } else {
                    resultDiv.innerText = "Incorrect! Saved by the keeper!";
                    document.getElementById("winner").innerText = `Player ${playerTurn === 1 ? 2 : 1} Wins Sudden Death!`;
                    document.getElementById("question").innerText = "";
                }
            }, 1000);
        }
    </script>
</body>
</html>